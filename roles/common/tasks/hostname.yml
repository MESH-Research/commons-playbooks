---

- name: "Hostname | add hostname to /etc/hosts"
  lineinfile:
    dest="/etc/hosts"
    regexp="^127.0.0.1"
    line="127.0.0.1  localhost {{ set_hostname }}"
    state="present"
  when: set_hostname is defined
  tags:
    - "common"
    - "hostname"

- name: "Hostname | set hostname"
  hostname:
    name="{{ set_hostname }}"
  when: set_hostname is defined
  tags:
    - "common"
    - "hostname"
